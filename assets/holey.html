<!DOCTYPE html>
<!-- saved from url=(0048)http://www.julianloscombe.co.uk/holey.html?10x10 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><title>Holey</title><link rel="icon" type="image/png" href="http://www.julianloscombe.co.uk/icon.png"><style>body,html{width:100%;height:100%;margin:0;padding:0;overflow:hidden}#container{width:100%;height:100%;max-width:501px;min-width:0;margin:0 auto}h1,h3{width:100%;text-align:left;font-family:monospace;margin:0;padding:5px 0}h1{text-align:center;padding:20px 0}#game_view{text-align:center}</style><script>"use strict";function startGame(){var a=Math.floor(Math.random()*columns),b=Math.floor(Math.random()*rows);currentPosition=[a,b],drawGame(),navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i)?updateCounter("Swipe to play. Moves player - "):updateCounter("Use the arrow keys to play. Moves played - ")}function decodeURL(a){var b=a.split("?");b.length>1&&(b=b[1].split("x"),2==b.length&&(rows=b[0],columns=b[1]))}function updateConstants(){size=smallestDimension()-1,horizontalSpacing=size/columns,verticalSpacing=size/rows,radiusX=horizontalSpacing/2,radiusY=verticalSpacing/2}function turn(a){!isGameOver()&&move(a)?(holePositions.push(getRandomLocation(currentPosition[0],currentPosition[1])),moveCount++,drawGame(),updateCounter()):(gameOver=!0,updateCounter("Game over, you fell into a hole! Moves played - "))}function updateCounter(a){var b=document.getElementById("count");b.innerHTML=void 0!=a?a+moveCount:"Moves played - "+moveCount}function move(a){var b=currentPosition[0],c=currentPosition[1];return"north"==a&&validMove(b,c-1)?(currentPosition=[b,c-1],!0):"east"==a&&validMove(b+1,c)?(currentPosition=[b+1,c],!0):"south"==a&&validMove(b,c+1)?(currentPosition=[b,c+1],!0):"west"==a&&validMove(b-1,c)?(currentPosition=[b-1,c],!0):!1}function validMove(a,b){return contains(a,b)?!1:!0}function isGameOver(){var a=currentPosition[0],b=currentPosition[1];return gameOver||contains(a-1,b)&&contains(a,b-1)&&contains(a+1,b)&&contains(a,b+1)?!0:!1}function contains(a,b){if(0>a||0>b||a>columns-1||b>rows-1)return!0;for(var c=0;c<holePositions.length;c++)if(holePositions[c][0]==a&&holePositions[c][1]==b)return!0;return!1}function getRandomLocation(a,b){var c=Math.floor(10*Math.random()+1);return 2.5>c&&a>0?[a-1,b]:5>c&&b>0?[a,b-1]:7.5>c&&columns-1>a?[a+1,b]:rows-1>b?[a,b+1]:getRandomLocation(a,b)}function smallestDimension(){var a=document.getElementById("container"),b=document.getElementById("title"),c=document.getElementById("count"),d=a.clientWidth,e=a.clientHeight-(b.offsetHeight+c.offsetHeight);return Math.min(d,e)}function drawGame(){updateConstants();var a=document.getElementById("holey_canvas");a.width=size+1,a.height=size+1;var b=a.getContext("2d");b.translate(.5,.5),drawVerticalLines(b),drawHorizontalLines(b),b.strokeStyle="#000",b.stroke(),drawCounter(b,currentPosition[0],currentPosition[1],!1),drawHoles(b)}function drawVerticalLines(a){for(var b=0,c=0;columns>=b;b++,c+=horizontalSpacing)a.moveTo(c,0),a.lineTo(c,size)}function drawHorizontalLines(a){for(var b=0,c=0;rows>=b;b++,c+=verticalSpacing)a.moveTo(0,c),a.lineTo(size,c)}function drawHoles(a){for(var b=0;b<holePositions.length;b++)drawCounter(a,holePositions[b][0],holePositions[b][1],!0)}function drawCounter(a,b,c,d){var e=b*horizontalSpacing+radiusX,f=c*verticalSpacing+radiusY;a.beginPath(),a.arc(e,f,Math.min(radiusX,radiusY)-4,0,2*Math.PI,!1),a.fillStyle=d?"#3A3E3B":"#1598ED",a.fill(),a.lineWidth=4,a.strokeStyle=d?"#454A46":"#266DBB",a.stroke()}var rows=20,columns=20,size=500,horizontalSpacing,verticalSpacing,radiusX,radiusY,currentPosition=[0,0],holePositions=[],moveCount=0,gameOver=!1,startX,startY;window.onload=function(){var a=window.location.href;decodeURL(a),startGame(),window.onresize=drawGame},document.onkeydown=function(a){a=a||window.event;var b=a.keyCode||a.which;37==b?turn("west"):38==b?turn("north"):39==b?turn("east"):40==b&&turn("south")},document.ontouchstart=function(a){var b=a.touches[0];startX=b.clientX,startY=b.clientY},document.ontouchmove=function(a){if(startX&&startY){var b=a.changedTouches[0],c=startX-b.clientX,d=startY-b.clientY;Math.abs(c)>Math.abs(d)?c>0&&Math.abs(c)>50?turn("west"):0>=c&&Math.abs(c)>50&&turn("east"):d>0&&Math.abs(d)>50?turn("north"):0>=d&&Math.abs(d)>50&&turn("south"),startX=void 0,startY=void 0}};</script></head><body><div id="container"><h1 id="title">Holey</h1><div id="game_view"><canvas id="holey_canvas" width="501" height="501"></canvas><h3 id="count">Use the arrow keys to play. Moves played - 0</h3></div></div>
</body></html>